function showAlert(e){var t=e;$("body").append("<div class='container'><div class='alert alert-danger alert-dismissible' id='custom-alert'><a href='#' class='close' data-dismiss='alert' aria-label='close'>&times;</a> "+t+"</div></div>")}function showLoadingScreen(){$("#loader-overlay").show()}function hideLoadingScreen(){$("#loader-overlay").hide()}function checkAll(){var e=document.getElementById("btnCheckUncheck"),t=document.getElementsByName("chkStudentSelect");if(0<t.length)if("Select All"===e.value){for(var n=0;n<t.length;n++)t[n].checked=!0;e.value="Unselect All"}else{for(n=0;n<t.length;n++)t[n].checked=!1;e.value="Select All"}}function promoteToNextSemester(){var e=document.getElementsByName("chkStudentSelect"),t=[];if(0<e.length){for(var n=0;n<e.length;n++)!0===e[n].checked&&t.push("'"+e[n].value+"'");0<t.length&&(showLoadingScreen(),$.ajax({url:"promotestudents",method:"POST",data:{selectedStudents:t.toString()},success:function(e){hideLoadingScreen(),"success"===e?$("td input:checked").closest("tr").remove():showAlert(e)},error:function(){hideLoadingScreen()}}))}}function filterStudent(){var e=$("#branch").val(),t=$("#semester").val();null===e||null===t?showAlert("Please select valid branch and semester"):(showLoadingScreen(),$.ajax({url:"filterstudent",method:"POST",data:{branch:e,semester:t},success:function(e){$("#promotionList").html(e),hideLoadingScreen()}}))}$(document).ready(function(){function u(e){$("#error").html(e),$("#error").show()}$("#menuPromote").on("click",function(){showLoadingScreen(),$(".noticecontainer").load("./promotion",function(){hideLoadingScreen()})}),$("#logout").on("click",function(){$.ajax({url:"logout",method:"GET",success:function(){location.href="./"}})}),$(".btnLogin").on("click",function(){showLoadingScreen(),$("body").load("./?mode=login",function(){hideLoadingScreen()})}),$(".btnSignUp").on("click",function(){showLoadingScreen(),$("body").load("./?mode=register",function(){hideLoadingScreen()})}),$("#requestprime").on("click",function(){showLoadingScreen(),$.ajax({url:"requestprime",method:"POST",success:function(e){hideLoadingScreen(),showAlert(e),e.includes("success")&&location.reload()},error:function(){hideLoadingScreen()}})}),$("#btnSignIn").on("click",function(){var e=$("#username").val(),t=$("#password").val(),n=$("input[name='logintype']:checked").val();""===e.trim()?u("Username is required"):""===t.trim()?u("Password is required"):(showLoadingScreen(),$.ajax({url:"login",method:"POST",data:{username:e,password:t,logintype:n},success:function(e){"success"===e?window.location.href="./dashboard":(hideLoadingScreen(),u(e))},error:function(){hideLoadingScreen()}}))}),$("#btnRegister").on("click",function(){var e=$("input[name='registertype']:checked").val(),t=$("#username").val(),n=$("#fullname").val(),o=$("#password").val(),a=$("#password2").val(),r=$("#branch").val(),i=$("#semester").val(),c=$("#college").val(),s=$("#phone").val(),d=$("#email").val(),l=$("#address").val();""===t.trim()?u("All fields are required"):""===n.trim()?u("Please enter your name"):""===o.trim()?u("Password field is required (without space)"):""===a.trim()?u("Please retype the password"):o!==a?u("Password does not match"):"student"!==e||null!==r&&""!==r.trim()?"student"!==e||null!==i&&""!==i.trim()?null===c||""===c.trim()?u("College field is required"):""===s.trim()?u("Phone field is required"):""===d.trim()?u("Email field is required"):""===l.trim()?u("Address field is required"):(showLoadingScreen(),$.ajax({url:"register",method:"POST",data:{username:t,fullname:n,password:o,password2:a,branchcode:r,semester:i,collegecode:c,phone:s,email:d,address:l,registertype:e},success:function(e){"success"===e?window.location.href="./dashboard":(hideLoadingScreen(),u(e))},error:function(){hideLoadingScreen()}})):u("Semester field is required"):u("Branch field is required")}),$("#btnSubmitNotice").on("click",function(e){e.preventDefault();var t=$("#noticetitle").val(),n=$("#noticebody").val(),o=document.getElementById("attachment").files[0],a=$("#semester").val(),r=$("#branch").val(),i=$("#start_date").val(),c=$("#end_date").val(),s=new FormData;s.set("noticetitle",t),s.set("noticebody",n),s.set("attachment",o),s.set("branchcode",r),s.set("semester",a),s.set("start_date",i),s.set("end_date",c),showLoadingScreen(),$.ajax({url:"notice",method:"post",enctype:"multipart/form-data",contentType:!1,processData:!1,data:s,success:function(e){"success"===e?window.location.href="./dashboard":(hideLoadingScreen(),u(e))},error:function(e){hideLoadingScreen(),u(e)}})}),$(".preview_data_id_notice").on("click",function(){showLoadingScreen();var e=$(this).data("id");window.location.href="./viewnotice?id="+e}),$(".delete_data_id_notice").on("click",function(){var e=$(this).data("id");$.ajax({url:"./viewnotice?del="+e,method:"GET",success:function(e){"success"===e?window.location.href="./":showAlert(e)}})}),$(".btnapprove").on("click",function(){var e=$(this).data("id"),t=$(this).closest("tr");showLoadingScreen(),$.ajax({url:"requestprime",method:"post",data:{approve:e},success:function(e){hideLoadingScreen(),"success"===e?t.remove():showAlert(e)},error:function(e){hideLoadingScreen(),showAlert(e)}})}),$(".btnreject").on("click",function(){var e=$(this).data("id"),t=$(this).closest("tr");showLoadingScreen(),$.ajax({url:"requestprime",method:"post",data:{reject:e},success:function(e){hideLoadingScreen(),"success"===e?t.remove():showAlert(e)},error:function(e){hideLoadingScreen(),showAlert(e)}})});var e=new Date,t=new Date;t.setMonth(t.getMonth()+1),t.setDate(t.getDay()+1),$("#start_date").datepicker({format:"dd-M-yyyy",autoclose:!0,startDate:e}).datepicker("setDate",e),$("#end_date").datepicker({format:"dd-M-yyyy",autoclose:!0,startDate:e}).datepicker("setDate",t)});